#:import math math

<GameDisplay>:
    color_bg: 0.5,0.5,0.5
    canvas:
        Color:
            rgb: self.color_bg
        Rectangle:
            pos: self.pos
            size: self.size


<Trace>:
    points: [(100,100), (200,200)]
    color_bg: 0.5,0.5,0.5
    canvas:
        Color:
            rgb: self.color_bg
        Line:
            width: 1.05
            points: self.points


<Planet>:
    radius: 2
    img_bg: 'img/planets/mountain1_bg.png'
    img_hl: 'img/planets/mountain1_hl.png'

    color_bg: 0.5,0.5,0.5
    color_hl: 0.5,0.5,0.5

    canvas:
        # BG
        Color:
            rgb: self.color_bg
        Rectangle:
            source: self.img_bg
            size: self.radius*2, self.radius*2
            pos: self.pos[0] - self.radius, self.pos[1] - self.radius

        # Highlights
        Color:
            rgb: self.color_hl
        Rectangle:
            source: self.img_hl
            size: self.radius*2, self.radius*2
            pos: self.pos[0] - self.radius, self.pos[1] - self.radius


<Canon>:
    color_bg: 0.5,0.5,0.5

    canvas.before:
        PushMatrix
        Rotate:
            angle: -self.angle
            axis: 0, 0, 1
            origin: self.pos

    canvas:
        Color:
            rgb: self.color_bg
        Ellipse:
            size: 10,28
            pos: self.pos[0] - 5, self.pos[1]

    canvas.after:
        PopMatrix


<Kite>:
    color_bg: 0.1,0.1,0.1
    color_hl: 0.1,0.1,0.1
    velocity: 3,10

    canvas.before:
        PushMatrix
        Rotate:
            angle: (270 + math.degrees(math.atan2(float(self.velocity[1]),self.velocity[0])))%360
            axis: 0, 0, 1
            origin: self.pos

    canvas:
        Color:
            rgb: 1,1,1
        Rectangle:
            source: 'img/kite1_rocket.png'
            size: 48,54
            pos: self.pos[0] - 24, self.pos[1] - 38

        Color:
            rgb: self.color_bg
        Rectangle:
            source: 'img/kite1_bg.png'
            size: 48,54
            pos: self.pos[0] - 24, self.pos[1] - 38

        Color:
            rgb: self.color_hl
        Rectangle:
            source: 'img/kite1_hl.png'
            size: 48,54
            pos: self.pos[0] - 24, self.pos[1] - 38

    canvas.after:
        PopMatrix



<Checkpoint>:
    points: 100,100,200,200
    color_bg: 0.5,0.5,0.5

    canvas:
        Color:
            rgb: self.color_bg
        Line:
            points: self.points
            width: 2